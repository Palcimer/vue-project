(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10a8e584","chunk-2d0c207f"],{4926:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.member?n("div",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-textarea",{attrs:{label:t.label,rules:[t.rules.require({label:t.label})],rows:"2","auto-grow":""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.save.apply(null,arguments):null}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t.wr_parent||t.item?n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("onClose")}}},[n("v-icon",[t._v("mdi-close")])],1):t._e(),n("v-btn",{attrs:{icon:""},on:{click:t.save}},[n("v-icon",[t._v("mdi-pencil")])],1)]},proxy:!0}],null,!1,197235301),model:{value:t.form.wr_content,callback:function(e){t.$set(t.form,"wr_content","string"===typeof e?e.trim():e)},expression:"form.wr_content"}})],1)],1):n("div",[t._v(" 로그인 후 댓글을 작성할 수 있습니다. "),n("v-btn",{attrs:{to:"/login?url="+t.$route.fullPath}},[t._v("로그인")])],1)},r=[],o=n("1da1"),a=n("5530"),s=(n("96cf"),n("a9e3"),n("99af"),n("2f62")),l=n("64f2"),c=n("248f"),m=n.n(c),u={name:"CommentForm",props:{table:{type:String,required:!0},wr_reply:{type:Number,required:!0},wr_parent:{type:Number,default:0},item:{type:Object,default:null}},data:function(){return{valid:!0,form:null}},computed:Object(a["a"])(Object(a["a"])({},Object(s["e"])({member:function(t){return t.user.member}})),{},{rules:function(){return m.a},label:function(){return this.item?"댓글 수정":0==this.wr_parent?"댓글 작성":"대댓글 작성"}}),created:function(){console.log("CommentForm created"),this.initForm()},mounted:function(){console.log("CommentForm mounted")},destroyed:function(){console.log("CommentForm destroyed")},methods:{initForm:function(){if(this.member)if(this.item)this.form=Object(l["deepCopy"])(this.item);else{var t={wr_reply:this.wr_reply,wr_parent:this.wr_parent,mb_id:this.member.mb_id,wr_email:this.member.mb_email,wr_name:this.member.mb_name,wr_content:""};this.form=t}},save:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.form.validate(),e.next=3,t.$nextTick();case 3:if(t.valid){e.next=5;break}return e.abrupt("return");case 5:if(!t.item){e.next=11;break}return e.next=8,t.$axios.put("/api/board/write/".concat(t.table,"/").concat(t.item.wr_id),t.form);case 8:n=e.sent,e.next=14;break;case 11:return e.next=13,t.$axios.post("/api/board/write/".concat(t.table),t.form);case 13:n=e.sent;case 14:n&&(t.$emit("onUpdate",n),t.initForm(),t.$refs.form.resetValidation(),t.$emit("onClose"));case 15:case"end":return e.stop()}}),e)})))()}}},d=u,p=n("2877"),f=Object(p["a"])(d,i,r,!1,null,null,null);e["default"]=f.exports},5105:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card-text",[n("comment-form",{attrs:{wr_reply:t.id,table:t.table,parent:0},on:{onUpdate:t.updateItem}}),n("v-list",[t._l(t.items,(function(e,i){return n("comment-item",{key:e.wr_id,attrs:{item:e,idx:i,table:t.table,access:t.access},on:{onReComment:t.reComment,onUpdate:t.updateItem,onRemove:t.deleteItem}})})),t.loading?n("v-list-item",[n("v-list-item-content",[n("v-progress-circular",{attrs:{value:20,indeterminate:""}})],1)],1):n("div",{directives:[{name:"intersect",rawName:"v-intersect",value:t.onIntersect,expression:"onIntersect"}]})],2)],1)},r=[],o=n("2909"),a=n("1da1"),s=(n("96cf"),n("a9e3"),n("99af"),n("7db0"),n("d3b7"),n("a434"),n("4926")),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-divider"),n("v-list-item",{staticClass:"align-start"},[n("div",{staticStyle:{position:"relative",top:"20px",left:"-8px"}},[t.item.wr_dep>0?n("v-icon",{style:{"padding-left":32*(t.item.wr_dep-1)+8+"px"}},[t._v(" mdi-subdirectory-arrow-right ")]):t._e()],1),n("v-list-item-content",[n("v-subheader",{staticClass:"pl-0"},[n("v-avatar",{staticClass:"white--text",attrs:{size:"28",color:"primary"}},[t._v(t._s(t.item.wr_name[0]))]),n("div",{staticClass:"ml-2"},[t._v(" "+t._s(t.item.wr_name)+" "),n("i",{staticClass:"ml-2"},[t._v(t._s(t.item.wr_email))]),t._v(" "+t._s(t.item.wr_id)+" ")]),n("v-spacer"),n("v-icon",{attrs:{small:""}},[t._v("mdi-clock-outline")]),n("display-time",{attrs:{time:t.item.wr_create_at}})],1),t.isModify?n("comment-form",{attrs:{item:t.item,wr_parent:t.item.wr_parent,wr_reply:t.item.wr_reply,table:t.table},on:{onClose:function(e){t.isModify=!1},onUpdate:t.modifyComment}}):n("div",{staticClass:"text-pre",style:{"font-size":"1.1em","line-height":"1.5em"}},[t._v(" "+t._s(t.item.wr_content)+" ")]),n("display-like",{staticStyle:{"padding-left":"4px"},attrs:{item:t.item,table:t.table,btnProps:{tile:!0,small:!0},icon:{like:"mdi-emoticon-excited-outline"},likeOnly:""}}),n("div",{staticClass:"d-flex"},[t.access.comment&&t.member?n("board-button",{attrs:{label:"댓글",icon:"mdi-pencil-outline",plain:""},on:{click:function(e){t.isComment=!t.isComment}}}):t._e(),n("v-spacer"),t.isModifiable?n("board-button",{attrs:{label:"수정",icon:"mdi-pencil-outline",plain:""},on:{click:function(e){t.isModify=!t.isModify}}}):t._e(),t.isModifiable?n("board-button",{attrs:{label:"삭제",icon:"mdi-trash-can-outline",plain:""},on:{click:function(e){return t.deleteComment(t.item)}}}):t._e()],1),t.isComment?n("comment-form",{attrs:{wr_parent:t.item.wr_id,wr_reply:t.item.wr_reply,table:t.table},on:{onClose:function(e){t.isComment=!1},onUpdate:t.reComment}}):t._e()],1)],1)],1)},c=[],m=n("5530"),u=n("2f62"),d=n("bb5e"),p=n("a439"),f=n("8b8f"),b=n("caa8"),v={components:{DisplayTime:b["a"],BoardButton:p["a"],CommentForm:s["default"],DisplayLike:f["a"]},name:"CommentItem",props:{item:{type:Object,required:!0},table:{type:String,required:!0},idx:{type:Number,required:!0},access:{type:Object,requred:!0}},data:function(){return{isComment:!1,isModify:!1}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(u["e"])("user",["member"])),Object(u["c"])("user",["GRANT"])),{},{isModifiable:function(){var t;return(null===(t=this.member)||void 0===t?void 0:t.mb_id)==this.item.mb_id||this.GRANT>=d["LV"].SUPER}}),created:function(){console.log("CommentItem created",this.member)},mounted:function(){console.log("CommentItem mounted",this.member)},methods:{reComment:function(t){this.$emit("onReComment",this.item,t)},modifyComment:function(t){this.$emit("onUpdate",t)},deleteComment:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$ezNotify.confirm("댓글을 삭제하시겠습니까?","삭제 확인",{icon:" mdi-alert"});case 2:if(i=n.sent,i){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,e.$axios.delete("/api/board/".concat(e.table,"/").concat(t.wr_id));case 7:r=n.sent,r&&(e.$toast.info("".concat(r," 개의 댓글을 삭제하였습니다.")),e.$emit("onRemove",t,r));case 9:case"end":return n.stop()}}),n)})))()}}},_=v,h=n("2877"),y=Object(h["a"])(_,l,c,!1,null,null,null),w=y.exports,k={components:{CommentForm:s["default"],CommentItem:w},name:"CommentList",props:{table:{type:String,required:!0},id:{type:[String,Number],required:!0},access:{type:Object,required:!0}},data:function(){return{items:[],loading:!1,options:{itemsPerPage:5,limitStart:0,sortBy:["wr_grp","wr_order"],sortDesc:[!1,!0],stf:["wr_reply"],stc:["eq"],stx:[this.id]},totalItems:0,item:null}},created:function(){console.log("CommentList created")},mounted:function(){console.log("CommentList mounted",this.access),this.fetchData()},methods:{fetchData:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/api/board/list/".concat(t.table),{params:t.options});case 3:n=e.sent,n&&t.setData(n),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},setData:function(t){this.items=[].concat(Object(o["a"])(this.items),Object(o["a"])(t.items)),this.totalItems=t.totalItems,this.options.limitStart+=this.options.itemsPerPage},updateItem:function(t){console.log("updateItem",t);var e=this.items.find((function(e){return e.wr_id==t.wr_id}));if(e){var n=this.items.indexOf(e);this.items.splice(n,1,t)}else this.items.unshift(t),this.totalItems++,this.options.limitStart++},reComment:function(t,e){console.log("reComment",t,e);var n=this.items.find((function(e){return e.wr_id==t.wr_id}));if(n){var i=this.items.indexOf(n);this.items.splice(i+1,0,e),this.totalItems++,this.options.limitStart++}},onIntersect:function(t,e){this.items.length<this.totalItems&&(t[0].isIntersecting&&this.fetchData(),console.log("onIntersect=======",t[0].isIntersecting))},deleteItem:function(t,e){console.log(this.totalItems,this.options.limitStart);var n=this.items.indexOf(t);n>=0&&(this.items.splice(n,e),this.totalItems-=e,this.options.limitStart-=e),console.log(this.totalItems,this.options.limitStart)}}},g=k,x=Object(h["a"])(g,i,r,!1,null,null,null);e["default"]=x.exports},"8b8f":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._b({},"div",t.$attrs,!1),[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:t.goodColor},on:{click:function(e){return t.likeUpdate(1)}}},"v-btn",Object.assign({},r,t.btnProps),!1),i),[n("v-icon",{attrs:{left:""}},[t._v(t._s(t.icon.like))]),t._v(" "+t._s(t.like)+" ")],1)]}}])},[n("span",[t._v("좋아요")])]),t.likeOnly?t._e():n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:t.badColor},on:{click:function(e){return t.likeUpdate(2)}}},"v-btn",Object.assign({},r,t.btnProps),!1),i),[n("v-icon",{attrs:{left:""}},[t._v(t._s(t.icon.bad))]),t._v(" "+t._s(t.bad)+" ")],1)]}}],null,!1,802923781)},[n("span",[t._v("싫어요")])])],1)},r=[],o=n("1da1"),a=n("5530"),s=(n("96cf"),n("99af"),n("2f62")),l={name:"DisplayLike",props:{item:{type:Object,required:!0},table:{type:String,required:!0},btnProps:{type:Object,default:null},icon:{type:Object,default:function(){return{like:"mdi-heart",bad:"mdi-heart-broken"}}},likeOnly:{type:Boolean,default:!1}},data:function(){return{likeFlag:this.item.likeFlag,like:this.item.good,bad:this.item.bad}},computed:Object(a["a"])(Object(a["a"])({},Object(s["e"])("user",["member"])),{},{goodColor:function(){return 1==this.likeFlag?"primary":""},badColor:function(){return 2==this.likeFlag?"error":""}}),methods:{likeUpdate:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.member){n.next=3;break}return e.$toast.error("회원만 사용할 수 있습니다."),n.abrupt("return");case 3:if(t!=e.likeFlag){n.next=9;break}return n.next=6,e.$axios.delete("/api/like/".concat(e.table,"/").concat(e.item.wr_id));case 6:i=n.sent,n.next=12;break;case 9:return n.next=11,e.$axios.post("/api/like/".concat(e.table,"/").concat(e.item.wr_id),{bg_flag:t});case 11:i=n.sent;case 12:i&&(e.likeFlag=i.likeFlag,e.like=i.like,e.bad=i.bad);case 13:case"end":return n.stop()}}),n)})))()}}},c=l,m=n("2877"),u=Object(m["a"])(c,i,r,!1,null,null,null);e["a"]=u.exports},a439:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",t._b({attrs:{small:t.breakPointXS},on:{click:function(e){return t.$emit("click")}}},"v-btn",t.$attrs,!1),[n("v-icon",{attrs:{left:!t.breakPointXS}},[t._v(t._s(t.icon))]),t.breakPointXS?t._e():n("div",[t._v(t._s(t.label))])],1)},r=[],o={name:"BoardButton",props:{label:{type:String,default:""},icon:{type:String,default:""}},computed:{breakPointXS:function(){return this.$vuetify.breakpoint.xs}}},a=o,s=n("2877"),l=Object(s["a"])(a,i,r,!1,null,null,null);e["a"]=l.exports},caa8:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[n("span",t._g(t._b({},"span",r,!1),i),[t._v(" "+t._s(t.display)+" ")])]}}])},[t._v(" "+t._s(t.formatTime)+" ")])},r=[],o={name:"DisplayTime",props:{time:{type:String,required:!0}},computed:{formatTime:function(){return this.$moment(this.time).format("LLL")},display:function(){var t=this.$moment(this.time),e=this.$moment(),n=e.diff(t,"days");return n>0?t.format("LL"):t.fromNow()}}},a=o,s=n("2877"),l=Object(s["a"])(a,i,r,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-10a8e584.bd797ffc.js.map